<% stylesheet_link_tag "home" %>

<h1>Cipher Kriptografi Tugas 1</h1>
<div class="Container">
  <%= form_with(url: '/process_form', method: 'post', multipart: true) do |form| %>
    <label for="dropdown">Input Type:</label>
    <%= select_tag :dropdown, options_for_select([["Text Input", "text"], ["Text File", "textfile"], ["Any File", "anyfile"]]), id: "dropdown" %>

    <div id="hidden-element1" style="display: block;">
      <label for="description">Input Text:</label>
      <%= form.text_area :input_text, rows: 4, cols: "50", id: "description" %>
    </div>

    <div id="hidden-element2" style="display: none;">
      <label for="file_text">Input File .txt:</label>
      <%= form.file_field :file_text, accept: '.txt' %>
    </div>

    <div id="hidden-element3" style="display: none;">
      <label for="file_any">Input Any File:</label>
      <%= form.file_field :file_any %>
    </div>

    <label for="dropdown_cipher">Cipher:</label>
    <%= select_tag :dropdown_cipher, options_for_select([["Vigenere Cipher", "vig_cipher"], ["Auto-Key Vigenere Cipher", "auto_vig_cipher"], ["Extended Vigenere Cipher", "ext_vig_cipher"], ["Playfair Cipher", "playfair_cipher"], ["Affine Cipher", "affine_cipher"], ["Hill Cipher", "hill_cipher"], ["Super Enkripsi", "super_enkripsi"]]), id: "dropdown_cipher" %>

    <div class="form-group">
      <label for="key">Key:</label>
      <%= form.text_field :key, placeholder: 'Enter Key', id: "key" %>
    </div>

    <div class="form-group">
      <%= form.submit 'Encrypt', name: 'encrypt_button', class: "btn btn-primary" %>
      <%= form.submit 'Decrypt', name: 'decrypt_button', class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
    var dropdown = document.getElementById('dropdown');
    var hiddenElement1 = document.getElementById('hidden-element1');
    var hiddenElement2 = document.getElementById('hidden-element2');
    var hiddenElement3 = document.getElementById('hidden-element3');
    dropdown.addEventListener('change', function() {
        if (dropdown.value === 'text') {
            hiddenElement1.style.display = 'block';
            hiddenElement2.style.display = 'none';
            hiddenElement3.style.display = 'none';
        } else if (dropdown.value === 'textfile'){
            hiddenElement2.style.display = 'block'
            hiddenElement1.style.display = 'none';
            hiddenElement3.style.display = 'none';
        } else {
            hiddenElement3.style.display = 'block';
            hiddenElement1.style.display = 'none';
            hiddenElement2.style.display = 'none';
        }
    });
});
</script>
